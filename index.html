<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<script type="text/javascript" src="./CoinWare/GameMgr/CWGame.js"></script> 
<script type="text/javascript" src="./CoinWare/GameMgr/MockGame.js"></script> 
<script type="text/javascript" src="./CoinWare/GameMgr/lib/jquery-1.10.0.min.js"></script>
<script type="text/javascript" src="./asset/box.js"></script> 
<link rel="stylesheet" href="style.css" />

<style type="text/css">

html, body { width: 100%; height: 100%; }
#toxicbonto-out { display: table; table-layout: fixed; margin: 0; padding: 0; height: 100%; width: 100%; min-width: 800px; min-height: 480px; }
#toxicbonto-in { display: table-cell; text-align: center; vertical-align: middle;  margin: 0; padding: 0; height: 100%; width: 100%; min-width: 800px; min-height: 480px; }

#toxicbonto-world { overflow: hidden; margin: 0 auto; width: 750px; height: 480px; padding: 0 25px; border: 2px #333 solid; background: white; position: relative; }

#toxicbonto-world  * { box-sizing: border-box; -moz-box-sizing: border-box; }

#toxicbonto-title { font-size: 50px; text-align: center; height: 100px; vertical-align: middle; line-height: 100px; white-space: nowrap; font-weight: bold; }
.toxicbonto-col { cursor: pointer; float: left; width: 250px; position: relative; z-index: 1; height: 380px; background: #aaa;  }
.toxicbonto-poison { position: absolute; z-index: 2; top: 25px; left: 50%; width: 100px; margin-left: -50px; height: 100px; border: 1px red solid; overflow: hidden; border-radius: 200%; }
.toxicbonto-poison-liquid { position: absolute; z-index: -1; background-color: blue; left: 0; right: 0; bottom: 0; height: 50%; }

.toxicbonto-box { position: absolute; z-index: 10; bottom: 110px; width: 200px; height: 100px; background: brown; border: 2px #333 solid; }
.toxicbonto-box[data-num="1"] { left: 50px; }
.toxicbonto-box[data-num="2"] { left: 50%; margin-left: -100px; }
.toxicbonto-box[data-num="3"] { right: 50px; }

.toxicbonto-cat { position: absolute; z-index: 10; bottom: 25px; right: 100px; left: 100px; height: 50px; border-radius: 200%; background-color: gray; border: 2px #333 solid; }

</style>
</head>
<body>

<div id="toxicbonto-out">
<div id="toxicbonto-in">
<div id="toxicbonto-world">

<div id="toxicbonto-title">CHOOSE TWO</div>



</div>

</div>
</div>
</div>

    <script type="text/javascript">

    function gameLoad(bbq) {
        bbq.onStart(function(params) {
		
		  var ib = 0, READY = false;
		  $('.toxicbonto-box').each( function(){
		    var t = $(this);
			window.setTimeout( function(){
			  t.animate( { bottom: '20px' } , 600 , 'swing' , function(){
		  
				console.log( 'Cat hide');
			  } ); 	
			
			} , 100 + ( ib * Math.random() ) );
			ib += 50;
		  
		  } );


		  //init the boxes
		  var boxes = new Boxes();
		  boxes.$el.appendTo( $('#toxicbonto-world') )
		  boxes.goUp();

		  // init the cat
		  
		  var t=0;
		  /** 
		   * step
		   * look at my fucking cat
		   */
		  
		  window.setTimeout( function(){
		  	// srsly look at it
		  } , t );
		  t+= 800;

		  /** 
		   * step
		   * hide the cat, make the box go down
		   */
		  window.setTimeout( function(){
		  	boxes.goDown();
		  } , t );
		  t+= 500;

		  /** 
		   * step
		   * suffle the box
		   */
		  window.setTimeout( function(){
		  	boxes.shuffle();
		  } , t );
		  t+= 1500;
		  
		   /** 
		   * step
		   * the user can now interact
		   */
		  window.setTimeout( function(){
		  	// .. TODO

		  } , 500 );

		  /*
		  $('body').on( 'click' , '.toxicbonto-col' , function(){
		  
		    if( ! READY ) return true;
		  
			console.log( 'Click' );
		  } );
		  */
		  
		  
        } );

        bbq.ready();
    }; 

    </script> 
</body>
</html>